// Generated by CoffeeScript 1.11.1
(function() {
  var NeutominatorLoader;

  NeutominatorLoader = (function() {
    function NeutominatorLoader() {
      this.selectedMode = "Stark";
      this.readCleanMode();
      this.init();
    }

    NeutominatorLoader.prototype.init = function() {
      document.getElementById('hardmode').addEventListener('click', this.setCleanMode);
      document.getElementById('softmode').addEventListener('click', this.setCleanMode);
      return document.getElementById('neutronen').addEventListener('click', (function(_this) {
        return function() {
          _this.setCleanMode();
          return _this.sendMessage();
        };
      })(this), false);
    };

    NeutominatorLoader.prototype.sendMessage = function() {
      if (this.selectedMode === "Schwach") {
        return chrome.extension.sendMessage({
          msg: "cleanUpSoftly"
        });
      } else {
        return chrome.extension.sendMessage({
          msg: "cleanUp"
        });
      }
    };

    NeutominatorLoader.prototype.readCleanMode = function() {
      return chrome.storage.local.get('modeValue', (function(_this) {
        return function(result) {
          if (result.modeValue === "Schwach") {
            _this.selectedMode = "Schwach";
            document.getElementById('softmode').checked = true;
          } else {
            _this.selectedMode = "Stark";
            document.getElementById('hardmode').checked = true;
          }
          return _this.sendMessage();
        };
      })(this));
    };

    NeutominatorLoader.prototype.setCleanMode = function() {
      this.selectedMode = document.querySelector('input[name="cleanseMode"]:checked').value;
      return chrome.storage.local.set({
        'modeValue': document.querySelector('input[name="cleanseMode"]:checked').value
      });
    };

    return NeutominatorLoader;

  })();

  document.addEventListener('DOMContentLoaded', function() {
    return new NeutominatorLoader();
  }, false);

}).call(this);
