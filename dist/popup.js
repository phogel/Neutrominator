// Generated by CoffeeScript 2.3.2
(function() {
  var NeutominatorLoader;

  NeutominatorLoader = class NeutominatorLoader {
    constructor() {
      this.selectedMode = "Stark";
      this.readCleanMode();
      this.init();
    }

    init() {
      document.getElementById('hardmode').addEventListener('click', this.setCleanMode);
      document.getElementById('softmode').addEventListener('click', this.setCleanMode);
      return document.getElementById('neutronen').addEventListener('click', () => {
        this.setCleanMode();
        return this.sendMessage();
      }, false);
    }

    sendMessage() {
      if (this.selectedMode === "Schwach") {
        return chrome.extension.sendMessage({
          msg: "cleanUpSoftly"
        });
      } else {
        return chrome.extension.sendMessage({
          msg: "cleanUp"
        });
      }
    }

    readCleanMode() {
      return chrome.storage.local.get('modeValue', (result) => {
        if (result.modeValue === "Schwach") {
          this.selectedMode = "Schwach";
          document.getElementById('softmode').checked = true;
        } else {
          this.selectedMode = "Stark";
          document.getElementById('hardmode').checked = true;
        }
        return this.sendMessage();
      });
    }

    setCleanMode() {
      this.selectedMode = document.querySelector('input[name="cleanseMode"]:checked').value;
      return chrome.storage.local.set({
        'modeValue': document.querySelector('input[name="cleanseMode"]:checked').value
      });
    }

  };

  document.addEventListener('DOMContentLoaded', function() {
    return new NeutominatorLoader();
  }, false);

}).call(this);
